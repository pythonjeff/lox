<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LOX FUND | Live Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <!-- Header with LOX FUND branding -->
        <header class="header">
            <div class="logo-container">
                <span class="logo-lox">LOX</span>
                <span class="logo-fund">FUND</span>
                <div class="logo-underline"></div>
            </div>
            <div class="header-subtitle">Portfolio Dashboard • Updates every 5 minutes</div>
        </header>

        <!-- Summary Panel -->
        <section class="summary-panel">
            <div class="summary-item">
                <div class="summary-label">NAV</div>
                <div class="summary-value" id="nav-value">—</div>
            </div>
            <div class="summary-item">
                <div class="summary-label">Total P&L</div>
                <div class="summary-value" id="total-pnl">—</div>
            </div>
            <div class="summary-item">
                <div class="summary-label">Last Update</div>
                <div class="summary-value" id="last-update">—</div>
            </div>
        </section>
        
        <!-- Performance Comparison Card -->
        <section class="performance-card">
            <div class="performance-header">
                <h3>Performance Since Inception</h3>
                <span class="inception-date">Jan 9, 2026</span>
            </div>
            <div class="performance-metrics">
                <div class="perf-metric fund-return">
                    <div class="perf-label">LOX FUND</div>
                    <div class="perf-value" id="fund-return">—</div>
                </div>
                <div class="perf-vs">vs</div>
                <div class="perf-metric benchmark-metric">
                    <div class="perf-label">S&P 500</div>
                    <div class="perf-value" id="sp500-return">—</div>
                    <div class="perf-alpha" id="alpha-sp500">—</div>
                </div>
                <div class="perf-vs">vs</div>
                <div class="perf-metric benchmark-metric btc-metric">
                    <div class="perf-label">BTC/USD</div>
                    <div class="perf-value" id="btc-return">—</div>
                    <div class="perf-alpha" id="alpha-btc">—</div>
                </div>
            </div>
        </section>

        <!-- Macro Indicators -->
        <section class="macro-section">
            <h2>Key Macro Indicators</h2>
            <div class="macro-grid" id="macro-indicators">
                <div class="macro-item">
                    <div class="macro-label">Loading...</div>
                    <div class="macro-value">—</div>
                </div>
            </div>
        </section>

        <!-- Positions Table -->
        <section class="positions-section">
            <h2>Open Positions</h2>
            <div class="table-container">
                <table id="positions-table">
                    <thead>
                        <tr>
                            <th>Symbol</th>
                            <th>Quantity</th>
                            <th>Market Value</th>
                            <th>P&L</th>
                            <th>P&L %</th>
                        </tr>
                    </thead>
                    <tbody id="positions-body">
                        <tr>
                            <td colspan="5" class="loading">Loading positions...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Closed Trades -->
        <section class="closed-trades-section">
            <div class="closed-trades-header">
                <h2>Closed Trades</h2>
                <div class="win-rate-badge" id="win-rate-badge">
                    <span class="win-rate-label">Win Rate</span>
                    <span class="win-rate-value" id="win-rate-value">—</span>
                </div>
            </div>
            
            <!-- Summary Stats -->
            <div class="closed-stats" id="closed-stats">
                <div class="closed-stat">
                    <span class="stat-label">Realized P&L</span>
                    <span class="stat-value" id="realized-pnl">—</span>
                </div>
                <div class="closed-stat">
                    <span class="stat-label">Wins</span>
                    <span class="stat-value wins" id="total-wins">—</span>
                </div>
                <div class="closed-stat">
                    <span class="stat-label">Losses</span>
                    <span class="stat-value losses" id="total-losses">—</span>
                </div>
            </div>
            
            <!-- Closed Trades Table -->
            <div class="table-container">
                <table id="closed-trades-table">
                    <thead>
                        <tr>
                            <th>Position</th>
                            <th>Cost</th>
                            <th>Proceeds</th>
                            <th>P&L</th>
                        </tr>
                    </thead>
                    <tbody id="closed-trades-body">
                        <tr>
                            <td colspan="4" class="loading">Loading closed trades...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Palmer: Macro Dashboard -->
        <section class="palmer-section">
            <div class="palmer-header">
                <h2 class="palmer-name">PALMER</h2>
                <span class="palmer-badge">Auto-Refresh 30m</span>
            </div>
            
            <!-- Traffic Light Indicators -->
            <div class="traffic-lights" id="traffic-lights">
                <div class="traffic-item" data-status="loading">
                    <span class="traffic-label">REGIME</span>
                    <span class="traffic-dot">●</span>
                    <span class="traffic-value">—</span>
                </div>
                <div class="traffic-item" data-status="loading">
                    <span class="traffic-label">VOLATILITY</span>
                    <span class="traffic-dot">●</span>
                    <span class="traffic-value">—</span>
                </div>
                <div class="traffic-item" data-status="loading">
                    <span class="traffic-label">CREDIT</span>
                    <span class="traffic-dot">●</span>
                    <span class="traffic-value">—</span>
                </div>
                <div class="traffic-item" data-status="loading">
                    <span class="traffic-label">RATES</span>
                    <span class="traffic-dot">●</span>
                    <span class="traffic-value">—</span>
                </div>
            </div>
            
            <!-- Two Column Layout: Events + Headlines -->
            <div class="palmer-columns">
                <!-- Fed/Fiscal Calendar -->
                <div class="palmer-column">
                    <h3 class="palmer-col-title">FED & FISCAL CALENDAR</h3>
                    <div class="palmer-events" id="palmer-events">
                        <div class="event-loading">Loading events...</div>
                    </div>
                </div>
                
                <!-- Macro Headlines -->
                <div class="palmer-column">
                    <h3 class="palmer-col-title">MACRO HEADLINES</h3>
                    <div class="palmer-headlines" id="palmer-headlines">
                        <div class="headline-loading">Loading headlines...</div>
                    </div>
                </div>
            </div>
            
            <!-- Palmer's Insight -->
            <div class="palmer-insight" id="palmer-insight">
                <div class="insight-loading">Loading insight...</div>
            </div>
            
            <div class="palmer-timestamp" id="palmer-timestamp"></div>
        </section>
    </div>

    <script src="{{ url_for('static', filename='dashboard.js') }}"></script>
</body>
</html>
